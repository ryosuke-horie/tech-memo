## Prerequisite

- It’s not that you don’t need to know Node.js.
    - We’ve simply focused on the essential knowledge needed to quickly handle AWS infrastructure construction using CDK.
    - Please study Node.js on your own as well.

## npm Basics

npm is the package manager for Node.js. Since CDK itself is a package, you won't be able to install it without knowing npm.

It’s comparable to `pip` in Python.

npm is installed along with Node.js. Run the following command in git bash or another terminal:

```bash
# Check version 
npm -v
```

### Package Management

There are two patterns for package installation:

- **Local Installation**
    - Installs packages in the `node_modules` directory inside the project.
    - This is preferred as it avoids contaminating other projects.
- **Global Installation**
    - Installs the package on the OS, making it available across all projects.
    - However, this approach does not guarantee the same environment when moving between systems.

```bash
`# Local Installation
npm install <package-name>  
# Global Installation 
npm install -g <package-name>`
```

## package.json

`package.json` manages information about the packages used in the project. It lists the names of the installed packages.

```json
{
  "name": "infra",
  "version": "0.1.0",
  "bin": {
    "cdk": "bin/cdk.js"
  },
  "scripts": {
    "build": "tsc",
    "cdk": "cdk",
    "lint": "npx @biomejs/biome check",
    "format": "npx @biomejs/biome check --fix",
    "snapshot": "npx vitest ./test/cdk-cheerpay-dev-snapshot.test.ts --run",
    "snapshot:update": "npx vitest ./test/cdk-cheerpay-dev-snapshot.test.ts --u"
  },
  "devDependencies": {
    "@biomejs/biome": "1.8.3",
    "@types/aws-lambda": "^8.10.145",
    "@types/node": "22.5.4",
    "aws-cdk": "2.155.0",
    "ts-node": "^10.9.2",
    "typescript": "~5.5.3",
    "vitest": "^2.0.5"
  },
  "dependencies": {
    "aws-cdk-lib": "2.155.0",
    "constructs": "^10.0.0",
    "source-map-support": "^0.5.21"
  }
}
```

### About scripts

In the `scripts` object of `package.json`, you can define frequently used commands as aliases like this:

```json
"command-name": "actual command"
```

For example, you can define code formatting or automatic testing commands, and run them with:

```bash
npm run <command-name>
```


### About devDependencies

This section lists the packages that are installed for development purposes. These packages are needed during development but are not used in production.

You can update this section manually, but it's usually updated automatically when you install a package. For example:
`npm install --save-dev aws-cdk`
This command will install the `aws-cdk` package and add it to `devDependencies`.

### About dependencies

This section lists packages used in production. The concept is the same as `devDependencies`, but these packages are necessary for the production environment.

## About package-lock.json

`package-lock.json` is used to manage detailed version information of the packages. In `package.json`, `"ts-node": "^10.9.2"` means that it allows **minor version updates** (e.g., 10.10.0, 10.11.0, etc.), as long as it's compatible with version 10.9.2.

However, to guarantee that a specific version is being used, `package-lock.json` is created.

`npm ci`

Using this command, you can install the exact package versions defined in `package-lock.json`. To eliminate environment differences during development, use `npm ci` instead of `npm install`.